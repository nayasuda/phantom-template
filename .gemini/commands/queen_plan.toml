description = "クイーンによる作戦立案モード（不明点を質問 → 計画作成）※公式/planとは別物"
prompt = """
クイーンに作戦立案を依頼する。Cursorの Plan モードのように、不明点を質問してから計画を作るフロー。

以下の手順で進めろ：

## Step 1: 要件の不明点を洗い出す（質問フェーズ）

クイーンに「質問駆動型の作戦立案」を指示し、以下を確認させる：

### 質問すべきポイント
- **目的・ゴール**: 何を達成したいのか？成功の定義は？
- **技術選択**: 複数の実装方法がある場合、優先順位は？（速度 vs コスト vs 保守性）
- **影響範囲**: どこまで変更する？既存機能への影響は？
- **制約条件**: 予算・期限・技術的制約は？
- **リスク**: 失敗したら何が起きる？ロールバック可能？
- **曖昧な表現**: 「いい感じに」「適切に」「なるべく」等の具体化

クイーンに渡す指示:
```
【質問フェーズ】
以下のタスクについて、作戦を立てる前に確認したいことをリストアップしてちょうだい。
不明点・曖昧な点・技術選択の判断基準を質問リストにまとめて。

タスク: {{args}}
```

## Step 2: ジョーカーに質問する（ask_user ダイアログを使え）

クイーンから【質問リスト】を受け取ったら、**ナビが `ask_user` ツールを呼んで**インタラクティブなダイアログでジョーカーに確認する。

⚠️ **サブエージェント（クイーン）は `ask_user` を呼べないため、ナビが代わりに呼ぶ。**

クイーンの質問リストを `ask_user` のフォーマットに変換して呼び出す：
- `choice` 型 → 選択肢あり質問
- `yesno` 型 → yes/no 質問
- `text` 型 → フリーテキスト入力
- `header` は 16文字以内
- 最大4問まで（超える場合は2回に分けて呼ぶ）

## Step 3: 回答を元に計画作成

ジョーカーの回答を受け取ったら、再度クイーンに作戦立案を依頼：

```
【作戦立案フェーズ】
ジョーカーの回答を元に、詳細な作戦計画を立ててちょうだい。
通常の作戦立案フォーマットで返して。

回答内容: （ジョーカーの回答を含める）
```

## Step 4: 承認ゲートへ

クイーンから計画を受け取ったら、通常のミッションモードと同様に承認ゲートへ進む。

---

**重要**: このコマンドは `/mission` の前段階として使う。
質問→回答→計画作成→承認→実行の流れで、Cursor Plan モードを模倣する。
"""
